"use strict";(self.webpackChunkjamni=self.webpackChunkjamni||[]).push([[398],{1398:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var a=s(1727),r=s(5043),n=s(579);function i(e){let{id:t,bg:s,posY:a,description:r,headline:i}=e;return(0,n.jsxs)("section",{id:t,className:"intro center-gr",style:{background:`url(${s}) no-repeat`,"--posY":a},children:[(0,n.jsx)("div",{className:"mask-layer"}),(0,n.jsxs)("div",{className:"container text-center",children:[(0,n.jsx)("h2",{className:"text-light",children:i}),r&&(0,n.jsx)("p",{className:"text-light small-text text-main up-case",dangerouslySetInnerHTML:{__html:r}})]})]})}var l=s(9461),c=s(1558);const o=r.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),d={dedupe:!0};c.qv.defineProperty(c.BE,"defaultValue",{value:c.sb});const u=(0,c.qm)(((e,t,s)=>{const{cache:a,compare:n,suspense:i,fallbackData:u,revalidateOnMount:m,revalidateIfStale:x,refreshInterval:h,refreshWhenHidden:p,refreshWhenOffline:g,keepPreviousData:f}=s,[v,b,w,j]=c.bZ.get(a),[N,y]=(0,c.lK)(e),E=(0,r.useRef)(!1),k=(0,r.useRef)(!1),C=(0,r.useRef)(N),L=(0,r.useRef)(t),R=(0,r.useRef)(s),T=()=>R.current,O=()=>T().isVisible()&&T().isOnline(),[V,A,F,P]=(0,c.r9)(a,N),S=(0,r.useRef)({}).current,_=(0,c.b0)(u)?s.fallback[N]:u,I=(e,t)=>{for(const s in S){const a=s;if("data"===a){if(!n(e[a],t[a])){if(!(0,c.b0)(e[a]))return!1;if(!n(B,t[a]))return!1}}else if(t[a]!==e[a])return!1}return!0},M=(0,r.useMemo)((()=>{const e=!!N&&!!t&&((0,c.b0)(m)?!T().isPaused()&&!i&&(!!(0,c.b0)(x)||x):m),s=t=>{const s=(0,c.rL)(t);return delete s._k,e?{isValidating:!0,isLoading:!0,...s}:s},a=V(),r=P(),n=s(a),l=a===r?n:s(r);let o=n;return[()=>{const e=s(V());return I(e,o)?(o.data=e.data,o.isLoading=e.isLoading,o.isValidating=e.isValidating,o.error=e.error,o):(o=e,e)},()=>l]}),[a,N]),D=(0,l.useSyncExternalStore)((0,r.useCallback)((e=>F(N,((t,s)=>{I(s,t)||e()}))),[a,N]),M[0],M[1]),H=!E.current,q=v[N]&&v[N].length>0,Z=D.data,$=(0,c.b0)(Z)?_:Z,U=D.error,Y=(0,r.useRef)($),B=f?(0,c.b0)(Z)?Y.current:Z:$,W=!(q&&!(0,c.b0)(U))&&(H&&!(0,c.b0)(m)?m:!T().isPaused()&&(i?!(0,c.b0)($)&&x:(0,c.b0)($)||x)),X=!!(N&&t&&H&&W),K=(0,c.b0)(D.isValidating)?X:D.isValidating,z=(0,c.b0)(D.isLoading)?X:D.isLoading,G=(0,r.useCallback)((async e=>{const t=L.current;if(!N||!t||k.current||T().isPaused())return!1;let a,r,i=!0;const l=e||{},o=!w[N]||!l.dedupe,d=()=>c.dO?!k.current&&N===C.current&&E.current:N===C.current,u={isValidating:!1,isLoading:!1},m=()=>{A(u)},x=()=>{const e=w[N];e&&e[1]===r&&delete w[N]},h={isValidating:!0};(0,c.b0)(V().data)&&(h.isLoading=!0);try{if(o&&(A(h),s.loadingTimeout&&(0,c.b0)(V().data)&&setTimeout((()=>{i&&d()&&T().onLoadingSlow(N,s)}),s.loadingTimeout),w[N]=[t(y),(0,c.lg)()]),[a,r]=w[N],a=await a,o&&setTimeout(x,s.dedupingInterval),!w[N]||w[N][1]!==r)return o&&d()&&T().onDiscarded(N),!1;u.error=c.ZH;const e=b[N];if(!(0,c.b0)(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return m(),o&&d()&&T().onDiscarded(N),!1;const l=V().data;u.data=n(l,a)?l:a,o&&d()&&T().onSuccess(a,N,s)}catch(p){x();const e=T(),{shouldRetryOnError:t}=e;e.isPaused()||(u.error=p,o&&d()&&(e.onError(p,N,e),(!0===t||(0,c.Tn)(t)&&t(p))&&(T().revalidateOnFocus&&T().revalidateOnReconnect&&!O()||e.onErrorRetry(p,N,e,(e=>{const t=v[N];t&&t[0]&&t[0](c.bu.ERROR_REVALIDATE_EVENT,e)}),{retryCount:(l.retryCount||0)+1,dedupe:!0}))))}return i=!1,m(),!0}),[N,a]),J=(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.mF)(a,C.current,...t)}),[]);if((0,c.Es)((()=>{L.current=t,R.current=s,(0,c.b0)(Z)||(Y.current=Z)})),(0,c.Es)((()=>{if(!N)return;const e=G.bind(c.ZH,d);let t=0;const s=(0,c.aw)(N,v,(function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s==c.bu.FOCUS_EVENT){const s=Date.now();T().revalidateOnFocus&&s>t&&O()&&(t=s+T().focusThrottleInterval,e())}else if(s==c.bu.RECONNECT_EVENT)T().revalidateOnReconnect&&O()&&e();else{if(s==c.bu.MUTATE_EVENT)return G();if(s==c.bu.ERROR_REVALIDATE_EVENT)return G(a)}}));return k.current=!1,C.current=N,E.current=!0,A({_k:y}),W&&((0,c.b0)($)||c.X3?e():(0,c.mf)(e)),()=>{k.current=!0,s()}}),[N]),(0,c.Es)((()=>{let e;function t(){const t=(0,c.Tn)(h)?h(V().data):h;t&&-1!==e&&(e=setTimeout(s,t))}function s(){V().error||!p&&!T().isVisible()||!g&&!T().isOnline()?t():G(d).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[h,p,g,N]),(0,r.useDebugValue)(B),i&&(0,c.b0)($)&&N){if(!c.dO&&c.X3)throw new Error("Fallback data is required when using suspense in SSR.");L.current=t,R.current=s,k.current=!1;const e=j[N];if(!(0,c.b0)(e)){const t=J(e);o(t)}if(!(0,c.b0)(U))throw U;{const e=G(d);(0,c.b0)(B)||(e.status="fulfilled",e.value=!0),o(e)}}return{mutate:J,get data(){return S.data=!0,B},get error(){return S.error=!0,U},get isValidating(){return S.isValidating=!0,K},get isLoading(){return S.isLoading=!0,z}}})),m=(0,c.Ht)(u,(e=>(t,s,a)=>(a.revalidateOnFocus=!1,a.revalidateIfStale=!1,a.revalidateOnReconnect=!1,e(t,s,a))));var x=s(5475),h=s(8967),p=s(7555);const g=s.p+"static/media/pagination-arrow-left.df03b068cc2d9c293788f72e40958200.svg";const f=s.p+"static/media/pagination-arrow-right.09326ff90cb67244b048fb55c1d2b033.svg";var v=s(1192);function b(e){let{pagesCount:t,scrollOffset:s,scrollElem:a}=e;const{pages:i,activePage:l,handlePagination:c}=function(e,t,s){var a;const[n,i]=(0,r.useState)(e>5?[1,2,3,4,5,"...",e]:Array(e).fill(null).map(((e,t)=>t+1))),[l,c]=(0,x.ok)(),o=parseInt(null!==(a=l.get("page"))&&void 0!==a?a:1),{scrollbarAccess:d}=(0,r.useContext)(v.x);return{pages:n,activePage:o,handlePagination:a=>{a>e||a<=0||"..."===a||(d.current?d.current.scrollTo(0,t,1e3):document.querySelector(s).scrollIntoView({behavior:"smooth"}),setTimeout((()=>{e>5&&i(a>=5&&a+2<e?[1,"...",a-1,a,a+1,"...",e]:a+2>=e?[1,"...",e-4,e-3,e-2,e-1,e]:[1,2,3,4,5,"...",e]),l.set("page",a),c(l)}),500))}}}(t,s,a);return(0,n.jsx)("div",{className:"pagination",children:(0,n.jsxs)("div",{className:"row gap-30 center-y end-x",children:[(0,n.jsx)("div",{className:"prev",onClick:()=>c(l-1),children:(0,n.jsx)("img",{src:g,alt:"prev"})}),(0,n.jsx)("ul",{className:"row gap-10 xsmall-text text-main",children:i.map(((e,t)=>(0,n.jsx)("li",{style:{pointerEvents:"..."!==e?"all":"none"},className:l==e&&"..."!==e?"active":"inactive",onClick:()=>c(e),children:e},t)))}),(0,n.jsx)("div",{className:"next",onClick:()=>c(l+1),children:(0,n.jsx)("img",{src:f,alt:"next"})})]})})}const w={"\u0441\u0435\u0440\u044b\u0439":"palette-gray-light","\u0447\u0435\u0440\u043d\u044b\u0439":"black","\u043a\u043e\u0440\u0438\u0447\u043d\u0435\u0432\u044b\u0439":"palette-brown","\u0431\u0435\u043b\u044b\u0439":"white","\u0431\u0435\u0436\u0435\u0432\u044b\u0439":"palette-beige","\u0437\u0435\u043b\u0435\u043d\u044b\u0439":"palette-green","\u0442\u0435\u043c\u043d\u043e-\u0441\u0435\u0440\u044b\u0439":"palette-gray","\u0441\u0432\u0435\u0442\u043b\u043e-\u043a\u043e\u0440\u0438\u0447\u043d\u0435\u0432\u044b\u0439":"palette-brown-light"};var j=s(3546),N=s(6990),y=s(241),E=s(3216);function k(e){let{level:t}=e;const s=(0,E.Zp)();return(0,n.jsxs)(N.A,{className:"no-results center-gr",children:[(0,n.jsx)("h3",{className:"up-case",children:"no results found"}),(0,n.jsx)(y.A,{onClick:()=>s(null!==t&&void 0!==t?t:"."),children:"go back"})]},"no-results")}var C=s(2901);function L(e){return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"26",height:"24",viewBox:"0 0 26 24",children:(0,n.jsx)("path",{d:"M14.0093 1.4952C13.5597 0.720353 12.4407 0.72035 11.9911 1.4952L8.82471 6.95206C8.6026 7.33482 8.21871 7.59603 7.78114 7.66212L1.84711 8.55838C0.850445 8.70891 0.500842 9.96729 1.27703 10.6104L5.69764 14.2728C6.10684 14.6118 6.29924 15.1466 6.19984 15.6686L5.04348 21.7412C4.86068 22.7012 5.86843 23.4471 6.73311 22.9918L12.3207 20.0497C12.746 19.8257 13.2543 19.8257 13.6796 20.0497L19.2673 22.9918C20.132 23.4471 21.1397 22.7012 20.9569 21.7412L19.8005 15.6686C19.7011 15.1466 19.8935 14.6118 20.3027 14.2728L24.7233 10.6104C25.4995 9.9673 25.1499 8.70891 24.1533 8.55838L18.2192 7.66212C17.7817 7.59603 17.3978 7.33482 17.1757 6.95206L14.0093 1.4952Z",fill:e.filled?"black":"#989898"})})}function R(e){let{el:t}=e;return(0,n.jsxs)("div",{className:"review-item text-main",children:[(0,n.jsx)("span",{className:"small-text text-black",children:t.name}),(0,n.jsx)("span",{className:"xxsmall-text text-gray",children:"\u0432\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d"}),(0,n.jsxs)("div",{className:"row wrap gap-20 s-between center-y",children:[(0,n.jsx)("div",{className:"reviews-stars row gap-5",children:Array(5).fill(null).map(((e,s)=>(0,n.jsx)(L,{filled:s+1<=t.review},s)))}),(0,n.jsx)("span",{className:"xxsmall-text text-gray",children:t.date})]}),t.comment.map(((e,t)=>(0,n.jsx)("p",{className:"text-black xsmall-text",children:e},t))),t.image&&(0,n.jsx)("div",{className:"review-image",style:{background:`url(${t.image})`}}),(0,n.jsx)("span",{className:"xxsmall-text text-black",children:t.product})]})}function T(e){let{data:t,isLoading:s,searchParams:a,error:r}=e;const i=t&&t.every((e=>!1===e.isShown));return(0,n.jsx)(j.N,{mode:"wait",children:r?(0,n.jsx)(p.A,{message:r.message}):!s&&t?i?(0,n.jsx)(k,{}):(0,n.jsx)(N.A,{className:"section-layout",children:t.map(((e,t)=>(0,n.jsx)(R,{el:e},t)))},a):(0,n.jsx)(C.A,{})})}function O(e){let{reviewsCount:t}=e;const s=(0,r.useMemo)((()=>(t.reduce(((e,t)=>e+t),0)/t.length).toFixed(1)),[]),a=(0,r.useMemo)((()=>{let e={1:0,2:0,3:0,4:0,5:0};return t.forEach((t=>e[t]++)),e}),[]);return(0,n.jsxs)("div",{className:"reviews-header row wrap center-y s-between gap-20",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"row gap-15 center-y",children:[(0,n.jsx)("div",{className:"total-rate text-main text-black",children:s}),(0,n.jsxs)("div",{className:"reviews-stars",children:[(0,n.jsx)("div",{className:"row gap-5",children:Array(5).fill(null).map(((e,t)=>(0,n.jsx)(L,{filled:!1},t)))}),(0,n.jsx)("div",{className:"reviews-stars-mask row gap-5",style:{clipPath:`inset(0 ${100-s/5*100}% 0 0)`},children:Array(5).fill(null).map(((e,t)=>(0,n.jsx)(L,{filled:!0},t)))})]})]}),(0,n.jsxs)("span",{className:"xxsmall-text text-main",children:["\u041d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 ",t.length," \u043e\u0442\u0437\u044b\u0432\u043e\u0432"]})]}),(0,n.jsx)("div",{className:"row wrap gap-10",children:Object.values(a).reverse().map(((e,t)=>(0,n.jsxs)("div",{className:"review-output row gap-5 center-y text-main text-gray xsmall-text",children:[Math.abs(5-t)," ",(0,n.jsx)(L,{filled:!1})," ",`(${e})`]},t)))})]})}function V(){var e;const[t]=(0,x.ok)(),s=parseInt(null!==(e=t.get("page"))&&void 0!==e?e:1),{data:a,error:i,isLoading:l,mutate:c}=m(["reviews",s,12]),{data:o}=m(["reviews-count"],h.Hq),{handleFilter:d}=function(e){var t;const[s,a]=(0,x.ok)(),r=null!==(t=s.getAll(e))&&void 0!==t?t:[],n=["minprice","maxprice","minwidth","maxwidth","mindepth","maxdepth"];return{handleSearchParams:function(t){const r=new URLSearchParams(s);if(n.includes(e))return r.set(e,t),void a(r);const i=r.getAll(e);if(i.includes(t)){const s=i.filter((e=>e!==t));r.delete(e),s.forEach((t=>r.append(e,t)))}else r.append(e,t);a(r)},handleFilter:function(e){const t={},a=[],r=[];let n=null,i=null,l=null,c=null,o=null,d=null;for(const[u,m]of s.entries())"page"!==u&&("minprice"===u?n=parseFloat(m)||0:"maxprice"===u?i=parseFloat(m)||25e4:"minwidth"===u?l=parseFloat(m)||0:"maxwidth"===u?c=parseFloat(m)||1e4:"mindepth"===u?o=parseFloat(m)||0:"maxdepth"===u?d=parseFloat(m)||1e4:"description"===u?a.push(m):"colors"===u?r.push(w[m]):t[u]=t[u]?[...t[u],m]:[m]);e((e=>e.map((e=>{const s=Object.entries(t).every((t=>{let[s,a]=t;return a.includes(e[s])})),u=a.every((t=>!0===e[t])),m=(!i||e.price<=i)&&(!n||e.price>=n),x=(!c||e.width<=c)&&(!l||e.width>=l),h=(!d||e.depth<=d)&&(!o||e.depth>=o),p=0===r.length||e.colors.some((e=>r.includes(e)));return{...e,isShown:s&&u&&m&&x&&h&&p}}))),!1)},resetFilter:function(e){s.delete(e),a(s)},allFilterParams:r}}();return(0,r.useEffect)((()=>{a&&d(c)}),[t,l]),(0,n.jsx)("section",{id:"reviews",children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"row gap-10 xxxsmall-text text-main text-black up-case",children:[(0,n.jsx)(x.N_,{className:"text-gray",to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),(0,n.jsx)("span",{children:"/"}),(0,n.jsx)("span",{children:"\u043e\u0442\u0437\u044b\u0432\u044b"})]}),o&&(0,n.jsx)(O,{reviewsCount:o}),(0,n.jsx)(T,{error:i,isLoading:l,searchParams:t,data:a}),o&&(0,n.jsx)(b,{scrollOffset:350,pagesCount:Math.ceil((o.length-1)/12),scrollElem:"#reviews"})]})})}const A=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{bg:a,id:"reviews-intro",posY:"70%",headline:"\u043e\u0442\u0437\u044b\u0432\u044b",description:"\u041c\u043d\u0435\u043d\u0438\u0435 \u043d\u0430\u0448\u0438\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u043e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e \u0434\u043b\u044f \u043d\u0430\u0441"}),(0,n.jsx)(V,{})]})}},1727:(e,t,s)=>{e.exports=s.p+"static/media/img_21.ef47eba8546a1ca705d7.webp"}}]);
//# sourceMappingURL=398.15b7b3e6.chunk.js.map